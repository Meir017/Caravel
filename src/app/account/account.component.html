<main class="page">
  <div class="content">
    <div class="sidebar">
      <ibm-tile>
        <img [src]="profile?.avatar_url" alt="Your Avatar">
        <div class="profile">
          <h3>{{ profile?.short_name || profile?.name }}</h3>
          <p><b>{{ profile?.pronouns }}</b></p>
          <ibm-tooltip-definition [content]="profile?.primary_email">{{ profile?.primary_email }}</ibm-tooltip-definition>
        </div>
        <button [ibmButton] size="field" (click)="openAuthorizer()">Mobile Login</button>
        <button ibmButton="tertiary" size="field" disabled>Upload ID Card</button>
      </ibm-tile>
      <ibm-tile>
        <button ibmButton="danger--tertiary" size="field" (click)="clearCache()">Clear Cache</button>
        <button ibmButton="danger" size="field" (click)="resetConfig()">Reset Config</button>
      </ibm-tile>
      <ibm-tile>
        <p>Storage Used: {{ storageUsed }}KB</p>
        <p>App Version: {{ appInfo.version }}</p>
      </ibm-tile>
    </div>
    <section class="account">
      <h1>Your Account</h1>
      <hr><br>
      <h3>Biography</h3>
      <br>
      <ibm-label>
        <textarea ibmTextArea placeholder="Biography">{{ profile?.bio }}</textarea>
      </ibm-label>
      <br>
      <app-configurator></app-configurator>
    </section>
  </div>
</main>

<ng-template #mobileAuthorizer>
  <h2>Authorize on Mobile</h2>
  <p>Scan this QR code using your device's camera app or a supported scanner to sign in.</p>
  <br>
  <p><b>WARNING: Anyone can use this code!</b> Hover over or click the code when you are ready and minimize the time the code is shown.</p>
  <div class="auth-hover-show" tabindex="0">
    <qrcode [qrdata]="mobileAuthUrl" [width]="250" errorCorrectionLevel="M"></qrcode>
  </div>
</ng-template>