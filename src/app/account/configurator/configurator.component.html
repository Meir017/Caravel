
<div class="configurator">
  <div class="settings-title">
    <h3>
      <span>Settings</span>
      <ibm-tooltip-icon content="These only affect Caravel and not your Canvas account.">
        <svg class="bx--btn__icon" ibmIcon="information" size="24"></svg>
      </ibm-tooltip-icon>
    </h3>
    <div class="actions">
      <button ibmButton="danger" size="field" (click)="resetConfig()">Reset Config</button>
      <button ibmButton="danger--tertiary" size="field" (click)="clearCache()">Clear Cache</button>
    </div>
  </div>
  <br>
  <section class="configurator-scopes">
    <div *ngFor="let scope of configuration | keyvalue" class="config-scope">
      <h4>{{ scope.key }}</h4>
      <div *ngFor="let conf of scope.value | keyvalue" class="configurable">
        <app-toggle *ngIf="conf.value.type === 'toggle'"
          [(value)]="conf.value.value"
          (change)="upd(scope.key, conf.key, conf.value.value)">
          {{ conf.value.name }}
        </app-toggle>
        <div *ngIf="conf.value.type === 'text'">
          <ibm-label>
            {{ conf.value.name }}
            <input ibmText type="text"
              [(ngModel)]="conf.value.value"
              (change)="upd(scope.key, conf.key, conf.value.value)">
          </ibm-label>
        </div>
        <div *ngIf="conf.value.type === 'select'">
          <ibm-select
            [label]="conf.value.name"
            [(ngModel)]="conf.value.value"
            (change)="upd(scope.key, conf.key, conf.value.value)">
            <option
              *ngFor="let opt of conf.value.options"
              [value]="opt">
              {{ opt }}
            </option>
          </ibm-select>
        </div>
      </div>
    </div>
  </section>
</div>