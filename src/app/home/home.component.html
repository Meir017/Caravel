<main class="page">
  <div class="content">
    <section class="home">
      <div class="control-bar">
        <h1>Your To Do</h1>
        <div>
          <p>{{ streamState.start | date }} - {{ streamState.end | date }}</p>
          <br>
          <span class="spacer"></span>
          <button (click)="loadFromPreviousDay()" title="Load Past Items">
            <svg><use xlink:href="/assets/icons/icon.svg#uparrow"/></svg>
          </button>
          <button (click)="loadFromToday()" title="Refresh/Reset View">
            <svg><use xlink:href="/assets/icons/icon.svg#refresh"/></svg>
          </button>
          <button class="sm-show"
            (click)="toggleSelectionMode()"
            title="Toggle Selection Mode">
            <!-- Repurposed icons? Never... -->
            <svg *ngIf="!selectionMode">
              <use xlink:href="/assets/icons/icon.svg#default"/>
            </svg>
            <svg *ngIf="selectionMode">
              <use xlink:href="/assets/icons/icon.svg#home"/>
            </svg>
          </button>
        </div>
      </div>
      <hr>
      <div *ngFor="let group of stream">
        <h2>{{ group.id }}</h2>
        <home-todo
          *ngFor="let item of group.items"
          [selectable]="selectionMode"
          [item]="item">
        </home-todo>
        <app-expandable
            *ngIf="group.completed.length > 0"
            [name]="'Completed Items ('+group.completed.length+')'">
          <home-todo
            *ngFor="let item of group.completed"
            [selectable]="selectionMode"
            [item]="item">
          </home-todo>
        </app-expandable>
      </div>
      <br><br>
    </section>
  </div>
</main>